# 🎯 **רשימת בדיקות מקיפה ומפורטת עבור TaskFlow**

## 💬 **קטגוריה 2: מערכת הצ'אט (Chat System)**

### **2.4 היסטוריית שיחות (Chat History)**

#### **📋 מבוא חשוב**
היסטוריית השיחות היא מרכז השליטה של המשתמש ב-TaskFlow, נקודת הסנכרון וההתמצאות. היא מאפשרת גישה מהירה, התמצאות בין תהליכים, שליטה במידע, הגנה על פרטיות, תיעוד, והתנהלות טבעית מול הצ'אט – במובייל, דסקטופ ובענן.  
כאן תמצא בדיקות ברמת UI, UX, שמירה, ביצועים, הרשאות, Edge Cases, אבטחה, סנכרון, נגישות, ולוגיקה עסקית. כל סעיף קריטי למוצר מקצועי ומודרני.

---

## 🧪 **רשימת בדיקות מלאה**

### **2.4.1 נראות ונגישות רשימת השיחות (UI/UX)**
- [ ] **איפה מופיעה ההיסטוריה?**
    - סיידבר, תפריט, דף ייעודי, או איזור ימין/שמאל במסך.
    - תמיד קיימת (גם ללא שיחות), או מוצגת Placeholder ("אין שיחות עדיין").
    - זמינה מכל מקום באפליקציה – אין מצב שהמשתמש "מאבד" את ההיסטוריה.

- [ ] **האם הרשימה נגישה למקלדת?**
    - Tab, חצים, Enter – מעבר בין שיחות ללא עכבר.
    - aria-labels לכל שיחה.
    - תמיכה בקורא מסך (Screen Reader).

- [ ] **עיצוב ברור:**
    - שמות שיחות (או "ללא כותרת" כשאין).
    - אייקון/תמונה/סטטוס ליד כל שיחה.
    - הבדלה בין שיחה פעילה לשאר (Highlight, קו, צבע).
    - תאריך/שעה אחרונה לכל שיחה (Last Message/Update).

---

### **2.4.2 סידור, מיון וסינון (Sorting, Ordering & Filtering)**
- [ ] **סידור שיחות:**
    - ברירת מחדל – לפי "עדכניות" (שיחה אחרונה בראש).
    - אפשרות למיין לפי שם, תאריך יצירה, תווית (Label), סוג.
    - Edge: מה קורה כשיש 2 שיחות עם אותו שם? האם מוצג מזהה/Tooltip?

- [ ] **חיפוש וסינון:**
    - שדה חיפוש – חיפוש לפי שם שיחה, תוכן אחרון, תווית.
    - אפשרות סינון – לפי סוג, סטטוס, "שיחות שנמחקו", "שיחות שלי", "שיחות משותפות".
    - Edge: אין תוצאות? הצגת הודעה ("לא נמצאו שיחות").

- [ ] **תמיכה ב־Pagination/Infinite Scroll:**
    - הרבה שיחות – האם הרשימה לא מקריסה?
    - גלילה חלקה, טעינה עצלנית (Lazy Load).

---

### **2.4.3 טעינת שיחה (Loading a Conversation)**
- [ ] **האם מעבר בין שיחות מהיר ומיידי?**
    - אין טעינה איטית/שגיאות/השהיה.
    - כל הודעות השיחה נטענות מיד.
    - Edge: שיחה עם מאות הודעות – ביצועים תקינים, אין קריסה/איטיות.

- [ ] **חיווי בזמן טעינת שיחה:**
    - Spinner, Progress Bar, "טוען שיחה..." – אם יש דיליי.
    - Edge: שיחה לא קיימת/נמחקה – הודעה מתאימה.

- [ ] **שמירה על מצב Scroll:**
    - עברת בין שיחות – נשמר המיקום ברשימה (Scroll Position).
    - חזרת לשיחה – חוזר לאותה הודעה/מיקום.

- [ ] **שיחה שנפתחה בטאב אחר – מסתנכרנת מיידית?**

---

### **2.4.4 מחיקת שיחה (Delete Conversation)**
- [ ] **כפתור מחיקה נגיש וברור:**
    - אייקון פח/Trash, טקסט "מחק שיחה", תפריט הקשר.
    - Edge: מחיקת שיחה אחרונה – מה מוצג?

- [ ] **אישור מחיקה (Confirmation):**
    - Modal/Popup – "האם אתה בטוח שברצונך למחוק?"
    - אפשרות Undo (אם רלוונטי), או "העבר לארכיון/Trash".

- [ ] **מחיקה מסירה לצמיתות?**
    - האם נמחקת מה־DB, מהסנכרון, מכל המכשירים?
    - שיחה שנמחקה – לא מופיעה באף מקום (אלא אם יש Trash/ארכיון).

- [ ] **הרשאות מחיקה:**
    - רק משתמש שיצר/בעלים יכול למחוק?
    - האם Guest/Admin יכול למחוק שיחה?
    - Edge: ניסיון למחוק שיחה ללא הרשאות – שגיאה ברורה.

- [ ] **מחיקה מסיבית (Bulk Delete):**
    - אפשרות לבחור כמה שיחות ולמחוק בבת אחת?
    - חיווי – כמה שיחות נבחרו, כמה נמחקו.

---

### **2.4.5 שינוי שם שיחה (Rename Conversation)**
- [ ] **איך משנים שם?**
    - Double Click, אייקון עט/Edit, תפריט הקשר.
    - פוקוס אוטומטי, אפשרות ביטול (Esc), שמירה ב־Enter/Click.
    - Edge: השארת שם ריק – נשמר כ"ללא כותרת" או מונע שמירה.

- [ ] **סנכרון שינוי שם:**
    - שינוי שם בשני טאבים – מה קורה?  
    - האם כל המכשירים מתעדכנים מיידית?
    - Edge: שינוי שם במקביל/קונפליקט – מי מנצח?

- [ ] **ולידציה של שם:**
    - אורך, תווים אסורים, קוד זדוני/HTML – מניעת XSS.
    - שם שכבר קיים – מותר? יש אזהרה?

---

### **2.4.6 שמירה וסנכרון (Persistence & Sync)**
- [ ] **שמירה בענן/DB:**
    - כל שינוי – נשמר מיידית (לא רק ב־Local Storage).
    - Edge: עבודה Offline – האם מסתנכרן ב־Online?
    - אין מצב ששיחה "נעלמת" בין מכשירים.

- [ ] **סנכרון בזמן אמת:**
    - שינוי/מחיקה/הוספה – מתעדכן בכל טאבים, מכשירים, אפליקציות (Mobile/Desktop).

- [ ] **שחזור/Undo:**
    - אפשרות לשחזר שיחה שנמחקה?
    - Edge: מחיקת שיחה ושחזור במקביל – קונפליקט.

---

### **2.4.7 פרטיות והרשאות (Privacy & Permissions)**
- [ ] **מי רואה כל שיחה?**
    - שיחות פרטיות – רק היוצר רואה.
    - שיחות משותפות – אילו משתמשים (רשימת מורשים).
    - Edge: ניסיון לצפות בשיחה שאינך מורשה – שגיאה ברורה.

- [ ] **שיחה ציבורית/מוסתרת – הגדרת הרשאות.**
    - אפשרות לשתף שיחה עם אחרים (Share/Invite).
    - הגדרת הרשאות צפיה/עריכה/מחיקה.

---

### **2.4.8 ביצועים ו־Edge Cases**
- [ ] **שיחה עם מאות/אלפי הודעות:**
    - טעינה חלקה, Paging/Scrolling חכם.
    - אין Memory Leak, אין אובדן הודעות.

- [ ] **מספר שיחות עצום (1000+):**
    - הרשימה לא מקריסה/מאיטה את האפליקציה.
    - אפשרות Paging, חיפוש יעיל.

- [ ] **שיחה שנוצרה ע"י API/פעולה חיצונית – האם מופיעה מיד?**

- [ ] **שיחות שנמחקו תוך כדי שימוש – האם מתעדכן מיידית?**

---

### **2.4.9 אבטחת מידע (Security)**
- [ ] **גישה ל־API של היסטוריה – מאובטחת ב־Token/JWT.**
- [ ] **ניסיון לשלוף שיחה של משתמש אחר – מונע, מתועד בלוג.**
- [ ] **הגנה על שמות/תוכן – מניעת XSS/Injection.**
- [ ] **מחיקת שיחה – נמחקת מה־DB ומה־Cache.**
- [ ] **שחזור/היסטוריית שיחות – גישה מוגבלת/מאובטחת.**

---

### **2.4.10 לוגים, אנליטיקס, ניטור**
- [ ] **כל פעולה – יצירה, מחיקה, שינוי שם – מתועדת בלוג (מזהה משתמש, שיחה, זמן).**
- [ ] **נתונים – כמות שיחות, ממוצע שיחות למשתמש, שיחות שנמחקו, שחזור.**
- [ ] **אפשרות לנטר אנומליות – שיחות מרובות נמחקות פתאום, גישה חריגה.**
- [ ] **מערכת התרעות – תקלה בטעינת היסטוריה, כשל ב־DB.**

---

### **2.4.11 בדיקות אוטומטיות/ידניות**
- [ ] **בדיקות Cypress/Playwright – טעינת שיחה, מעבר, מחיקה, שינוי שם, סנכרון.**
- [ ] **בדיקות Edge – שיחה ריקה, שיחה שנמחקה, שינוי שם במקביל.**
- [ ] **בדיקות עומס – אלפי שיחות, מאות הודעות, טעינה/ביצועים.**
- [ ] **בדיקות הרשאות – User, Guest, Admin, צפייה/מחיקה/שיתוף.**
- [ ] **בדיקות Mobile/Desktop/Tablet – תצוגה, חוויה, גלילה, Swipe.**

---

## 🏅 **Best Practices ל־TaskFlow**
- **UI אחיד, ברור, רספונסיבי – בכל מכשיר.**
- **שמירה בענן, סנכרון מיידי, גיבוי אוטומטי.**
- **מחיקה עם Undo, הרשאות חכמות, פרטיות מוקפדת.**
- **חיפוש מתקדם, מיון, תיוג, סינון.**
- **בדיקות אוטומטיות לכל תרחיש.**
- **ניטור ו־Analytics לכל פעולה חשובה.**
- **שמירת Scroll, זכירת בחירה אחרונה.**
- **UI נגיש לכל, כולל מקלדת וקורא מסך.**
- **שחזור פשוט, מניעת טעויות בלתי הפיכות.**

---

## ✅ **סיכום**
היסטוריית שיחות היא ליבת ה־Workflow ב-TaskFlow. כל סעיף כאן קריטי לתפעול קל, בטוח, נעים, ומתקדם.  
עברו על כל סעיף, סמנו ✔️ או ❌, תעדו הערות, ותעדפו תיקונים/שיפורים לפי חומרה.

---